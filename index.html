<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</title>

<style>
:root{
  --text:#ffffff;
  --border:rgba(255,255,255,.15);
}

body{
  margin:0;
  background-image:
    linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
    url("assets/bg.jpg");
  background-size:cover;
  background-position:center 60%;
  background-repeat:no-repeat;
  color:var(--text);
  font-family: system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", sans-serif;
  text-align:center;
  padding:40px 18px;
}

h1{ margin-bottom:30px; }

.wrap{
  display:flex;
  gap:20px;
  justify-content:center;
  flex-wrap:wrap;
}

.gacha-box{
  width:340px;
  background:rgba(30,30,35,.85);
  border:1px solid var(--border);
  border-radius:16px;
  padding:18px;
}

button{
  padding:10px 18px;
  margin-top:10px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}

.btn-draw{ background:#ffffff; color:#111; }
.btn-play{
  background:rgba(255,255,255,.1);
  color:white;
  border:1px solid var(--border);
}
.hidden{ display:none; }

.result{
  margin-top:15px;
  min-height:60px;
  padding:12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:rgba(0,0,0,.3);
}

/* ===== ãƒ¬ã‚¢ãƒªãƒ†ã‚£è‰² ===== */
.rar-N   { border-color:rgba(255,255,255,.15); }
.rar-R   { border-color:#7ec8ff; }
.rar-SR  { border-color:#ffb347; }
.rar-SSR { border-color:#ffd700; }
.rar-UR  { border-color:#ff4df0; }

/* ===== æ¼”å‡º ===== */

/* Rï¼šè»½ãå…‰ã‚‹ */
.fx-R{ animation:pulse .8s ease-out 1; }
@keyframes pulse{
  0%{ box-shadow:0 0 0 transparent; }
  50%{ box-shadow:0 0 20px rgba(126,200,255,.4); }
  100%{ box-shadow:0 0 0 transparent; }
}

/* SRï¼šã‚­ãƒ©ã£ã¨ */
.fx-SR{ animation:shine 0.8s ease-out 1; }
@keyframes shine{
  0%{ box-shadow:0 0 0 transparent; }
  50%{ box-shadow:0 0 25px rgba(255,179,71,.5); }
  100%{ box-shadow:0 0 0 transparent; }
}

/* SSRï¼šã‚ºãƒ¼ãƒ ï¼‹ç™ºå…‰ */
.fx-SSR{ animation:pop 0.6s ease-out 1; }
@keyframes pop{
  0%{ transform:scale(.95); }
  50%{ transform:scale(1.05); box-shadow:0 0 30px rgba(255,215,0,.6); }
  100%{ transform:scale(1); }
}

/* URï¼šç¥æ¼”å‡º */
.fx-UR{
  animation:ultimate 1s ease-out 1;
}
@keyframes ultimate{
  0%{ transform:scale(.9) rotate(0deg); }
  30%{ transform:scale(1.1) rotate(1deg); box-shadow:0 0 40px rgba(255,77,240,.8); }
  60%{ transform:scale(1.05) rotate(-1deg); }
  100%{ transform:scale(1) rotate(0deg); }
}
</style>
</head>

<body>
<h1>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</h1>

<div class="wrap">

  <div class="gacha-box">
    <h2>ğŸŒ¤ ã‚„ã•ã—ã‚</h2>
    <button class="btn-draw" onclick="draw('soft')">ã‚¬ãƒãƒ£</button>
    <div class="result" id="softResult">æœªæ’å‡º</div>
    <button class="btn-play hidden" id="softPlay" onclick="play('soft')">â–¶ å†ç”Ÿ</button>
  </div>

  <div class="gacha-box">
    <h2>ğŸ”¥ å¼·ã‚</h2>
    <button class="btn-draw" onclick="draw('strong')">ã‚¬ãƒãƒ£</button>
    <div class="result" id="strongResult">æœªæ’å‡º</div>
    <button class="btn-play hidden" id="strongPlay" onclick="play('strong')">â–¶ å†ç”Ÿ</button>
  </div>

</div>

<audio id="player"></audio>

<script>
let state = { soft:null, strong:null };

/* ===== ãƒ‡ãƒ¼ã‚¿ ===== */
const softPool = [
  { file:"audio/soft01.mp3", rarity:"N",   label:"ãƒãƒ¼ãƒãƒ«" },
  { file:"audio/soft02.mp3", rarity:"R",   label:"ãƒ¬ã‚¢ï¼" },
  { file:"audio/soft03.mp3", rarity:"SR",  label:"Sãƒ¬ã‚¢ï¼" },
  { file:"audio/soft04.mp3", rarity:"SSR", label:"SSãƒ¬ã‚¢ï¼ï¼" },
  { file:"audio/soft05.mp3", rarity:"UR",  label:"ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¢ï¼ï¼ï¼" }
];

const strongPool = [
  { file:"audio/strong01.mp3", rarity:"N",   label:"ãƒãƒ¼ãƒãƒ«" },
  { file:"audio/strong02.mp3", rarity:"R",   label:"ãƒ¬ã‚¢ï¼" },
  { file:"audio/strong03.mp3", rarity:"SR",  label:"Sãƒ¬ã‚¢ï¼" },
  { file:"audio/strong04.mp3", rarity:"SSR", label:"SSãƒ¬ã‚¢ï¼ï¼" },
  { file:"audio/strong05.mp3", rarity:"UR",  label:"ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¢ï¼ï¼ï¼" }
];

/* ===== æŠ½é¸ï¼ˆå€‹æ•°ï¼ç¢ºç‡ï¼‰ ===== */
function pickRandom(arr){
  return arr[Math.floor(Math.random()*arr.length)];
}

function clearFx(el){
  el.className="result";
}

function applyFx(el,rarity){
  el.classList.add("rar-"+rarity);
  if(rarity==="R") el.classList.add("fx-R");
  if(rarity==="SR") el.classList.add("fx-SR");
  if(rarity==="SSR") el.classList.add("fx-SSR");
  if(rarity==="UR") el.classList.add("fx-UR");
}

function draw(which){
  const pool = which==="soft" ? softPool : strongPool;
  const item = pickRandom(pool);
  state[which]=item;

  const box = document.getElementById(which+"Result");
  clearFx(box);
  box.textContent = item.label;
  applyFx(box,item.rarity);

  document.getElementById(which+"Play").classList.remove("hidden");
}

function play(which){
  const item = state[which];
  if(!item){ alert("å…ˆã«ã‚¬ãƒãƒ£ã‚’å¼•ã„ã¦ã­"); return; }

  const player = document.getElementById("player");
  player.src=item.file;
  player.play().catch(()=>{
    alert("audioãƒ•ã‚©ãƒ«ãƒ€ã«mp3ã‚’ç½®ã„ã¦ã­");
  });
}
</script>

</body>
</html>
