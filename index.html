<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</title>

<style>
body{
  margin:0;
  min-height:100vh;
  font-family: system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif;
  color:#fff;
  position:relative;
  overflow-x:hidden;
}
  
/* èƒŒæ™¯â‘ ï¼šåŸ‹ã‚ã‚‹ï¼ˆã¼ã‹ã—ï¼‰ */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:#fff;
  transform: scale(1.05); /* ã¼ã‹ã—ã®ç«¯ã£ã“å¯¾ç­– */
  z-index:-2;
}
  
  /* èƒŒæ™¯â‘¡ï¼šå…¨éƒ¨å…¥ã‚Œã‚‹ï¼ˆãŠã˜ã•ã‚“å®Œå…¨è¡¨ç¤ºï¼‰ */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background: url("assets/bg.jpg") center 30% / 90% auto no-repeat;
  z-index:-1;
}
  
/* å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
.view{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.card{
  background:rgba(0,0,0,0.6); /* â† åŠé€æ˜ */
  backdrop-filter:blur(10px); /* â† ã™ã‚Šã‚¬ãƒ©ã‚¹åŠ¹æœ */
  -webkit-backdrop-filter:blur(10px);
  padding:25px;
  border-radius:20px;
  width:min(520px, 92vw);
  text-align:center;
  box-shadow:0 0 30px rgba(0,0,0,.4);
  border:1px solid rgba(255,255,255,0.1);
}
  
h1{
  margin-bottom:20px;
  text-shadow: 0 2px 10px rgba(o,o,o,o.6)
}

input{
  width:100%;
  box-sizing:border-box;
  display:block;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-bottom:15px;
  font-size:16px;
}

.btn{
  border:none;
  border-radius:999px;
  padding:12px 18px;
  font-size:14px;
  cursor:pointer;
  font-weight:bold;
}

.btn-primary{
  background:white;
  color:black;
}

.btn-play{
  display:none;
  margin-top:10px;
  background:#444;
  color:white;
}

.error{
  color:#ff6666;
  margin-top:10px;
}

/* ã‚¬ãƒãƒ£ç”»é¢ */
.container{
  max-width:900px;
  width:100%;
  margin:0 auto;
}

.grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(320px, 1fr));
  gap:35px;
  justify-content:center;
  align-items:start;
  width:100%;
}

@media(max-width:600px){
  .grid{
    grid-template-columns:1fr 1fr;
    gap:14px;
 }
  
 .conteiner{
   width:90%;
   max-width:360px;
 }
}

.gacha-box{
  background: rgba(0,0,0,0.65);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  padding:18px;
  border-radius:25px;
  width:100%;
  box-sizing:border-box;
  max-width:360px;
  margin:0;
  text-align:center;
  border:1px solid rgba(255,255,255,0.10);
  box-shadow: 0 0 30px rgba(0,0,0,0.35);
}

@media(max-width:600px){
 .gacha-box{
   max-width:160px;
   padding:14px;
 }
  
 .grid{
   gap:12px;
 }
}

.btn-round{
  width:60px;
  height:60px;
  border-radius:12%;
  background:white;
  color:black;
  font-weight:bold;
  border:none;
  cursor:pointer;
  font-size:14px;
}

.result{
  margin-top:15px;
  padding:15px;
  border-radius:15px;
  min-height:60px;
  transition:.3s;
}

/* ãƒ¬ã‚¢ãƒªãƒ†ã‚£æ¼”å‡º */
.normal{ color:white; }

.rare{
  color:#66ccff;
  text-shadow:0 0 10px #66ccff;
}

.srare{
  color:#cc66ff;
  text-shadow:0 0 15px #cc66ff;
}

.ssrare{
  color:#ffcc00;
  text-shadow:0 0 20px #ffcc00;
  animation:shine 1.5s infinite alternate;
}

.ultra{
  color:#ff4444;
  text-shadow:0 0 30px #ff4444;
  animation:flash .8s infinite alternate;
}

@keyframes shine{
  from{ filter:brightness(1); }
  to{ filter:brightness(1.5); }
}

@keyframes flash{
  from{ transform:scale(1); }
  to{ transform:scale(1.05); }
}

/* ã‚¦ãƒ«ãƒˆãƒ©ç¢ºå®šæ¼”å‡º */
.flash-screen{
  position:fixed;
  inset:0;
  background:white;
  opacity:0;
  pointer-events:none;
  animation:flashBang .5s ease-out;
}

@keyframes flashBang{
  0%{ opacity:0; }
  40%{ opacity:.9; }
  100%{ opacity:0; }
}

::selecthon{
  background:#ffeo82;
  color:#000;
}

.page-title{
  color:#333;
  text-shadow:
    0 2px 0 #fff
    o 4px 15px rgba(0,0,0,0.15);}

</style>
</head>

<body>

<!-- ğŸ” LOGIN -->
<section id="loginView" class="view">
  <div class="card">
    <h1>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</h1>
    <form id="loginForm">
      <input id="passwordInput" type="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
      <button type="submit" class="btn btn-primary">å…¥å®¤</button>
      <p id="loginError" class="error" style="display:none;">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã†ã‚ˆ</p>
    </form>
  </div>
</section>

<!-- ğŸ° GACHA -->
<section id="appView" class="view" style="display:none;">
  <div class="page-title">
    <h1>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</h1>

    <div class="grid">

      <!-- ã‚„ã•ã—ã‚ -->
      <div class="gacha-box">
        <h2>ğŸ’•ä¸‹ğŸ’•</h2>
        <button class="btn-round" onclick="draw('soft')">ã‚¬ãƒãƒ£</button>
        <div id="resultSoft" class="result normal">æœªæ’å‡º</div>
        <button id="playSoft" class="btn btn-play" onclick="playAudio()">â–¶ å†ç”Ÿ</button>
      </div>

      <!-- å¼·ã‚ -->
      <div class="gacha-box">
        <h2>ğŸ”¥æš´é¦¬ğŸ´</h2>
        <button class="btn-round" onclick="draw('hard')">ã‚¬ãƒãƒ£</button>
        <div id="resultHard" class="result normal">æœªæ’å‡º</div>
        <button id="playHard" class="btn btn-play" onclick="playAudio()">â–¶ å†ç”Ÿ</button>
      </div>

    </div>
  </div>
</section>

<script>
/* ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ */
const PASSWORD="muhomuho";

/* ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç† */
const loginView=document.getElementById("loginView");
const appView=document.getElementById("appView");
const loginForm=document.getElementById("loginForm");
const passwordInput=document.getElementById("passwordInput");
const loginError=document.getElementById("loginError");

loginForm.addEventListener("submit",function(e){
  e.preventDefault();
  if(passwordInput.value===PASSWORD){
    loginView.style.display="none";
    appView.style.display="flex";
  }else{
    loginError.style.display="block";
  }
});

/* ã‚¬ãƒãƒ£ãƒ‡ãƒ¼ã‚¿ */
const gachaData={
  soft:[
    {file:"assets/audio/bougen/a001.mp3",text:"è¡¨ç¤ºå1",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/a002.mp3",text:"è¡¨ç¤ºåãƒ¬ã‚¢",rarity:"rare",weight:25},
    {file:"assets/audio/bougen/a003.mp3",text:"è¡¨ç¤ºåS",rarity:"srare",weight:15},
    {file:"assets/audio/bougen/a004.mp3",text:"è¡¨ç¤ºåSS",rarity:"ssrare",weight:7},
    {file:"assets/audio/bougen/a005.mp3",text:"è¡¨ç¤ºåULTRA",rarity:"ultra",weight:3}
  ],
  hard:[
    {file:"assets/audio/simoneta/a001.mp3",text:"è¡¨ç¤ºå1",rarity:"normal",weight:50},
    {file:"assets/audio/simoneta/a002.mp3",text:"è¡¨ç¤ºåãƒ¬ã‚¢",rarity:"rare",weight:25},
    {file:"assets/audio/simoneta/a003.mp3",text:"è¡¨ç¤ºåS",rarity:"srare",weight:15},
    {file:"assets/audio/simoneta/a004.mp3",text:"è¡¨ç¤ºåSS",rarity:"ssrare",weight:7},
    {file:"assets/audio/simoneta/a005.mp3",text:"è¡¨ç¤ºåULTRA",rarity:"ultra",weight:3}
  ]
};

let currentAudio=null;

/* æŠ½é¸ */
function draw(type){
  const pool=gachaData[type];
  const total=pool.reduce((s,i)=>s+i.weight,0);
  let rand=Math.random()*total;

  for(let item of pool){
    if(rand<item.weight){
      showResult(type,item);
      currentAudio=item.file;
      return;
    }
    rand-=item.weight;
  }
}

/* çµæœè¡¨ç¤º */
function showResult(type,item){
  const box=document.getElementById(type==="soft"?"resultSoft":"resultHard");
  const playBtn=document.getElementById(type==="soft"?"playSoft":"playHard");

  box.className="result "+item.rarity;
  box.textContent=item.text;

  playBtn.style.display="inline-block";

  if(item.rarity==="ultra"){
    const flash=document.createElement("div");
    flash.className="flash-screen";
    document.body.appendChild(flash);
    setTimeout(()=>flash.remove(),500);
  }
}

/* å†ç”Ÿ */
function playAudio(){
  if(!currentAudio) return;
  const audio=new Audio(currentAudio);
  audio.play().catch(()=>alert("éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªã—ã¦ã­"));
}
</script>

</body>
</html>
