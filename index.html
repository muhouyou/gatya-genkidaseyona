<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</title>

<style>
body{
  margin:0;
  min-height:100vh;
  font-family: system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif;
  color:#fff;
  position:relative;
  overflow-x:hidden;
}
  
/* èƒŒæ™¯â‘ ï¼šåŸ‹ã‚ã‚‹ï¼ˆã¼ã‹ã—ï¼‰ */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:#fff;
  transform: scale(1.05); /* ã¼ã‹ã—ã®ç«¯ã£ã“å¯¾ç­– */
  z-index:-2;
}
  
  /* èƒŒæ™¯â‘¡ï¼šå…¨éƒ¨å…¥ã‚Œã‚‹ï¼ˆãŠã˜ã•ã‚“å®Œå…¨è¡¨ç¤ºï¼‰ */
body::after{
  content:"";
  position:fixed;
  inset:0;
  background: url("assets/bg.jpg") center 30% / 90% auto no-repeat;
  z-index:-1;
}
  
/* å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
.view{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.card{
  background:rgba(0,0,0,0.6); /* â† åŠé€æ˜ */
  backdrop-filter:blur(10px); /* â† ã™ã‚Šã‚¬ãƒ©ã‚¹åŠ¹æœ */
  -webkit-backdrop-filter:blur(10px);
  padding:25px;
  border-radius:20px;
  width:min(520px, 92vw);
  text-align:center;
  box-shadow:0 0 30px rgba(0,0,0,.4);
  border:1px solid rgba(255,255,255,0.1);
}
  
h1{
  margin-bottom:20px;
  text-shadow: 0 2px 10px rgba(o,o,o,o.6)
}

input{
  width:100%;
  box-sizing:border-box;
  display:block;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-bottom:15px;
  font-size:16px;
}

.btn{
  border:none;
  border-radius:999px;
  padding:12px 18px;
  font-size:14px;
  cursor:pointer;
  font-weight:bold;
}

.btn-primary{
  background:white;
  color:black;
}

.btn-play{
  display:none;
  margin-top:10px;
  background:#444;
  color:white;
}

.error{
  color:#ff6666;
  margin-top:10px;
}

/* ã‚¬ãƒãƒ£ç”»é¢ */
.container{
  max-width:900px;
  width:100%;
  margin:0 auto;
}

.grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(320px, 1fr));
  gap:35px;
  justify-content:center;
  align-items:start;
  width:100%;
}

@media(max-width:600px){
  .grid{
    grid-template-columns:1fr 1fr;
    gap:14px;
 }
  
 .conteiner{
   width:90%;
   max-width:360px;
 }
}

.gacha-box{
  background: rgba(0,0,0,0.65);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  padding:18px;
  border-radius:25px;
  width:100%;
  box-sizing:border-box;
  max-width:360px;
  margin:0;
  text-align:center;
  border:1px solid rgba(255,255,255,0.10);
  box-shadow: 0 0 30px rgba(0,0,0,0.35);
}

@media(max-width:600px){
 .gacha-box{
   max-width:160px;
   padding:14px;
 }
  
 .grid{
   gap:12px;
 }
}

.btn-round{
  width:60px;
  height:60px;
  border-radius:12%;
  background:white;
  color:black;
  font-weight:bold;
  border:none;
  cursor:pointer;
  font-size:14px;
}

.result{
  margin-top:15px;
  padding:15px;
  border-radius:15px;
  min-height:60px;
  transition:.3s;
}

/* ãƒ¬ã‚¢ãƒªãƒ†ã‚£æ¼”å‡º */
.normal{ color:white; }

.rare{
  color:#66ccff;
  text-shadow:0 0 10px #66ccff;
  animation:glow 1s ease-in-out infinite alternate;
}

.srare{
  color:#cc66ff;
  text-shadow:0 0 15px #cc66ff;
  animation: superFlash 0.6s ease-in-out 3;
}

.ssrare{
  color:#ffcc00;
  text-shadow:0 0 20px #ffcc00;
  animation:shine 1.5s infinite alternate,bounceText 0.8s ease-in-out infinite;
}

.ultra{
  color:#ff4444;
  text-shadow:0 0 30px #ff4444;
  animation:flash .8s infinite alternate;
}

@keyframes bounceText{
  0%   { transform: translateY(0); }
  30%  { transform: translateY(-8px); }
  50%  { transform: translateY(0); }
  70%  { transform: translateY(-4px); }
  100% { transform: translateY(0); }
}
  
@keyframes glow{
  from{text-shadow: 0 0 6px rgba(102,204,255,0.6);}
  to{text-shadow: 0 0  18px rgba(102,204,255,1);}
}

@keyframes shine{
  from{ filter:brightness(1); }
  to{ filter:brightness(1.5); }
}

@keyframes superFlash{
  0%{transform:scale(1);}
  50%{transform:scale(1.08);}
  100%{transform:scale(1);}
}

@keyframes flash{
  0%{opacity:1;}
  50%{opacity:0.2;}
  100%{opacity:1;}
}
  
  /* ã‚¦ãƒ«ãƒˆãƒ©ç¢ºå®šæ¼”å‡º */
.flash-screen{
  position:fixed;
  inset:0;
  background:white;
  opacity:0;
  pointer-events:none;
  z-index:9999;
  animation:flashBang .5s ease-out;
}

@keyframes flashBang{
  0%{ opacity:0; }
  40%{ opacity:.9; }
  100%{ opacity:0; }
}

::selecthon{
  background:#ffeo82;
  color:#000;
}

#appView .page-title h1{
  color:#111;
  -webkit-text-stroke:2px #ffffff;
  text-shadow:
    2px 2px 0 #ffffff,
    -2px 2px 0 #ffffff,
    2px -2px 0 #ffffff,
    -2px -2px 0 #ffffff,
    0 6px 12px rgba(0,0,0,0.35);
  font-weight:900;
}

@media(max-width:600px){
  #appView .page-title h1{
    color:#ed6d46;
    -webkit-text-stroke:0;
    text-shadow:none;
  }
  #appView .page-title{
  dispray:inline-block;
  padding:5px 10px;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(6px);
  border-radius:10px;
 }
}

</style>
</head>

<body>

<!-- ğŸ” LOGIN -->
<section id="loginView" class="view">
  <div class="card">
    <h1>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</h1>
    <form id="loginForm">
      <input id="passwordInput" type="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
      <button type="submit" class="btn btn-primary">å…¥å®¤</button>
      <p id="loginError" class="error" style="display:none;">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã†ã‚ˆ</p>
    </form>
  </div>
</section>

<!-- ğŸ° GACHA -->
<section id="appView" class="view" style="display:none;">
  <div class="page-title">
    <h1>å…ƒæ°—å‡ºã›ã‚ˆã‚¬ãƒãƒ£</h1>

    <div class="grid">

      <!-- ã‚„ã•ã—ã‚ -->
      <div class="gacha-box">
        <h2>ğŸ’•ä¸‹ğŸ’•</h2>
        <button class="btn-round" onclick="draw('soft')">ã‚¬ãƒãƒ£</button>
        <div id="resultSoft" class="result normal">æœªæ’å‡º</div>
        <button id="playSoft" class="btn btn-play" onclick="playAudio()">â–¶ å†ç”Ÿ</button>
      </div>

      <!-- å¼·ã‚ -->
      <div class="gacha-box">
        <h2>ğŸ”¥æš´é¦¬ğŸ´</h2>
        <button class="btn-round" onclick="draw('hard')">ã‚¬ãƒãƒ£</button>
        <div id="resultHard" class="result normal">æœªæ’å‡º</div>
        <button id="playHard" class="btn btn-play" onclick="playAudio()">â–¶ å†ç”Ÿ</button>
      </div>

    </div>
  </div>
</section>

<script>
/* ğŸ”‘ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ */
const PASSWORD="muhomuho";

/* ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç† */
const loginView=document.getElementById("loginView");
const appView=document.getElementById("appView");
const loginForm=document.getElementById("loginForm");
const passwordInput=document.getElementById("passwordInput");
const loginError=document.getElementById("loginError");

loginForm.addEventListener("submit",function(e){
  e.preventDefault();
  if(passwordInput.value===PASSWORD){
    loginView.style.display="none";
    appView.style.display="flex";
  }else{
    loginError.style.display="block";
  }
});

/* ã‚¬ãƒãƒ£ãƒ‡ãƒ¼ã‚¿ */
const gachaData={
  soft:[
    {file:"assets/audio/bougen/n_01.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_02.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_03.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},    
    {file:"assets/audio/bougen/n_04.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_05.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_06.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_07.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_08.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_09.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/bougen/n_10.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    
    {file:"assets/audio/bougen/a002.mp3",text:"ãƒ¬ã‚¢",rarity:"rare",weight:25},
    {file:"assets/audio/bougen/a003.mp3",text:"Sãƒ¬ã‚¢!",rarity:"srare",weight:15},
    {file:"assets/audio/bougen/a004.mp3",text:"SSãƒ¬ã‚¢!!",rarity:"ssrare",weight:7},
    {file:"assets/audio/bougen/a005.mp3",text:"ULTRAãƒ¬ã‚¢ï¼ï¼ï¼",rarity:"ultra",weight:3}
  ],
  hard:[
    {file:"assets/audio/simoneta/.mp3",text:"ãƒãƒ¼ãƒãƒ«",rarity:"normal",weight:50},
    {file:"assets/audio/simoneta/b002.mp3",text:"ãƒ¬ã‚¢",rarity:"rare",weight:25},
    {file:"assets/audio/simoneta/b003.mp3",text:"Sãƒ¬ã‚¢ï¼",rarity:"srare",weight:15},
    {file:"assets/audio/simoneta/b004.mp3",text:"SSãƒ¬ã‚¢ï¼ï¼",rarity:"ssrare",weight:7},
    {file:"assets/audio/simoneta/b005.mp3",text:"ULTRAãƒ¬ã‚¢ï¼ï¼ï¼",rarity:"ultra",weight:3}
  ]
};

let currentAudio=null;

/* æŠ½é¸ */
function draw(type){
  const pool=gachaData[type];
  const total=pool.reduce((s,i)=>s+i.weight,0);
  let rand=Math.random()*total;

  for(let item of pool){
    if(rand<item.weight){
      showResult(type,item);
      currentAudio=item.file;
      return;
    }
    rand-=item.weight;
  }
}

/* çµæœè¡¨ç¤º */
function showResult(type,item){
  const box=document.getElementById(type==="soft"?"resultSoft":"resultHard");
  const playBtn=document.getElementById(type==="soft"?"playSoft":"playHard");

  const rarityClasses = ["normal","rare","srare","ssrare","ultra"];

  box.classList.remove(...rarityClasses);
  box.classList.add("result");

  // åŒã˜ãƒ¬ã‚¢åº¦é€£ç¶šã§ã‚‚ã‚¢ãƒ‹ãƒ¡ã‚’ç¢ºå®Ÿã«å†èµ·å‹•
  void box.offsetWidth;

  box.classList.add(item.rarity);
  box.textContent = item.text;
  playBtn.style.display = "inline-block";

  if(item.rarity === "ultra"){
    flashBang();
  }
}
 
function flashBang(){
  const flash = document.createElement("div");
  flash.className = "flash-screen";
  document.body.appendChild(flash);

  flash.addEventListener("animationend", () => flash.remove(), { once:true });
}

/* å†ç”Ÿ */
function playAudio(){
  if(!currentAudio) return;
  const audio=new Audio(currentAudio);
  audio.play().catch(()=>alert("éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèªã—ã¦ã­"));
}
</script>

</body>
</html>
